<!doctype html>
<html lang="de">
<link rel="icon" href="images/favicon.ico" />
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-0K66K9F68G"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-0K66K9F68G');
    </script>
    <meta charset="utf-8">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="fonts/icomoon/style.css">

    <link rel="stylesheet" href="css/owl.carousel.min.css">

    <link rel="stylesheet" href="css/bootstrap.min.css">

    <link rel="stylesheet" href="css/style.css">

    <title>Panel</title>
</head>

<body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<div id="mainbar"
     style="line-height: 53px; height:60px; width: 95%; background-color: rgb(255, 255, 255); margin: auto; margin-top: 15px; border-radius: 10px; box-shadow: 0 2px 3px 0 rgba(0, 0, 0, 0.1);">
    <a href="https://www.gruleiru.de/main.html"><img src="images/ente.png" style="height:50px; margin-left: 10px;" class="ente" id="ente"></a>
    <span style="line-height: normal; display: inline-block; vertical-align: middle; margin-left: 10px;"><a
            style="color: black;" id="reminder" href="https://www.google.com">Termine</a></span>
    <!--span style="line-height: normal; display: inline-block; vertical-align: middle; margin-left: 20px;"><a style="color: black;" id="pictures" href="https://gruleiru.de">Fotoalbum</a></span>-->
    <!--span style="line-height: normal; display: inline-block; vertical-align: middle; margin-left: 20px;"><a style="color: black;" id="settings" href="https://www.google.com">Einstellungen</a></span>-->
    <span style="line-height: normal; display: inline-block; vertical-align: middle; margin-left: 20px;"><a
            style="color: black;" id="invites" href="https://www.google.com">Support</a></span>
    <span style="line-height: normal; display: inline-block; vertical-align: middle; margin-left: 20px;"><a
            style="color: black;" id="hefa" href="https://www.google.com">HeFa</a></span>
    <div id="drop" class="drop"
         style="height: 60px; width: 70px; border-radius: 10px; background-color: rgb(255, 255, 255); box-shadow: 0 2px 3px 0 rgba(0, 0, 0, 0.1); float: right;">
        <a id="more"><img src="images/more.png"
                          style="height: 30px; float: right; margin-top: 13px; margin-right: 20px;"></a>
        <a href="https://www.google.com" id="settings"><img src="images/set.png"
                                                            style="height: 30px; float: right; margin-top: 20px; margin-right: 20px;"></a>
        <a onclick="Logout('temp')" id="logout" class="logout"><img src="images/logout.png"
                                                                    style="height: 30px; float: right; margin-top: 20px; margin-right: 19px;"></a>
    </div>

</div>
<script>
    ext = "160"
    function mobile() {
        var userAgent = navigator.userAgent;
        if (userAgent.match(/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i)) {
            return true;
        } else {
            return false;
        }
    }
    if (mobile() == true) {
        ext = "205"
        document.getElementById("mainbar").innerHTML = `
      <a href="https://www.gruleiru.de/main.html"><img src="images/ente.png" style="height:50px; margin-left: 10px;" class="ente" id="ente"></a>
    <span style="line-height: normal; display: inline-block; vertical-align: middle; margin-left: 10px;"><a
        style="color: black;" id="reminder" href="https://www.google.com">Termine</a></span>
    <!--span style="line-height: normal; display: inline-block; vertical-align: middle; margin-left: 20px;"><a style="color: black;" id="pictures" href="https://gruleiru.de">Fotoalbum</a></span>-->
    <!--span style="line-height: normal; display: inline-block; vertical-align: middle; margin-left: 20px;"><a style="color: black;" id="settings" href="https://www.google.com">Einstellungen</a></span>-->
    <span style="line-height: normal; display: inline-block; vertical-align: middle; margin-left: 20px;"><a
        style="color: black;" id="hefa" href="https://www.google.com">HeFa</a></span>
    <a href="https://www.dropbox.com/scl/fo/ka6jnvb837dyuwkdi0w1s/h?dl=0&rlkey=giihr4pwablkueo3dodj2ry9u" id="dropbox" class="dropbox"><img src="images/dropbox.png"
          style="height: 30px; margin-left: 19px;"></a>
    <div id="drop" class="drop"
      style="height: 60px; width: 70px; border-radius: 10px; background-color: rgb(255, 255, 255); box-shadow: 0 2px 3px 0 rgba(0, 0, 0, 0.1); float: right;">
      <a id="more"><img src="images/more.png"
          style="height: 30px; float: right; margin-top: 13px; margin-right: 20px;"></a>
      <a href="https://www.google.com" id="settings"><img src="images/set.png"
          style="height: 30px; float: right; margin-top: 20px; margin-right: 20px;"></a>
      <a href="https://www.google.com" id="invites" class="logout"><img src="images/invitation.png"
          style="height: 30px; float: right; margin-top: 20px; margin-right: 20px;"></a>
      <a onclick="Logout('temp')" id="logout" class="logout"><img src="images/logout.png"
          style="height: 30px; float: right; margin-top: 20px; margin-right: 19px;"></a>
      `
    } else {
        document.getElementById("mainbar").innerHTML = `<a href="https://www.gruleiru.de/main.html"><img src="images/ente.png" style="height:50px; margin-left: 10px;" class="ente" id="ente"></a>
    <span style="line-height: normal; display: inline-block; vertical-align: middle; margin-left: 10px;"><a
        style="color: black;" id="reminder" href="https://www.google.com">Termine</a></span>
    <!--span style="line-height: normal; display: inline-block; vertical-align: middle; margin-left: 20px;"><a style="color: black;" id="pictures" href="https://gruleiru.de">Fotoalbum</a></span>-->
    <!--span style="line-height: normal; display: inline-block; vertical-align: middle; margin-left: 20px;"><a style="color: black;" id="settings" href="https://www.google.com">Einstellungen</a></span>-->
    <span style="line-height: normal; display: inline-block; vertical-align: middle; margin-left: 20px;"><a
        style="color: black;" id="invites" href="https://www.google.com">Support</a></span>
    <span style="line-height: normal; display: inline-block; vertical-align: middle; margin-left: 20px;"><a
        style="color: black;" id="hefa" href="https://www.google.com">HeFa</a></span>
    <span style="line-height: normal; display: inline-block; vertical-align: middle; margin-left: 20px;"><a
        style="color: black;" id="db" href="https://www.dropbox.com/scl/fo/ka6jnvb837dyuwkdi0w1s/h?dl=0&rlkey=giihr4pwablkueo3dodj2ry9u">Dropbox</a></span>
    <div id="drop" class="drop"
      style="height: 60px; width: 70px; border-radius: 10px; background-color: rgb(255, 255, 255); box-shadow: 0 2px 3px 0 rgba(0, 0, 0, 0.1); float: right;">
      <a id="more"><img src="images/more.png"
          style="height: 30px; float: right; margin-top: 13px; margin-right: 20px;"></a>
      <a href="https://www.google.com" id="settings"><img src="images/set.png"
          style="height: 30px; float: right; margin-top: 20px; margin-right: 20px;"></a>
      <a onclick="Logout('temp')" id="logout" class="logout"><img src="images/logout.png"
          style="height: 30px; float: right; margin-top: 20px; margin-right: 19px;"></a>`
    }
    animating = false
    animatingout = false
    $(".drop").animate({
        height: '60'
    })
    $('.drop').hover(function () {
        if (animatingout == true) {
            animating = true
            $(this).stop()
            $(this).animate({
                height: ext
            }, function () {
                animatingout = false
                animating = true
            })
        }


        if (animating == false) {
            animating = true
            $(this).animate({
                height: ext
            }, function () {
                animating = false
            })
        }
    })
    $('.drop').mouseleave(function () {
        animatingout = true
        $(this).stop()
        $(this).animate({
            height: '60'
        }, function () {
            animatingout = false
            animating = false
        })
    })
</script>
<div class="content">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-6 contents">
                <div class="row justify-content-center">
                    <div class="col-md-12">
                        <div class="form-block" id="block">
                            <div class="mb-4 mainContainer">
                                <h3>Support <strong class="nwtxt">Anfragen</strong></h3>

                                <!--div class="container">
                                    <div class="block">
                                        <div class="title">Zahlungserinnerung</div>
                                        <div class="indicator red"></div>
                                    </div>
                                    <div class="description">
                                        KÃ¶nnte ich die Zahlungserinnerung bitte noch einmal per mail erhalten?
                                    </div>
                                    <div class="separator"></div>
                                </div-->

                                <script>
                                    const queryString = window.location.search;
                                    const urlParams = new URLSearchParams(queryString);
                                    const session = urlParams.get('sid')

                                    const domain = "https://www.gruleiru.de"

                                    document.getElementById("reminder").setAttribute("href", domain + "/panel?sid=" + session)
                                    document.getElementById("settings").setAttribute("href", domain + "/settings?sid=" + session)
                                    document.getElementById("invites").setAttribute("href", domain + "/ticket?sid=" + session) // invites
                                    document.getElementById("hefa").setAttribute("href", domain + "/hefa?sid=" + session)
                                    // document.getElementById("logout").setAttribute("href", "https://regapi.gruleiru.de/logout?sid=" + session)
                                    document.getElementById("logout").setAttribute("onclick", "Logout('" + session + "');")

                                    const http = new XMLHttpRequest();
                                    http.open("GET", "https://hefa.gruleiru.de/getSupport?sid=" + session);
                                    http.send();
                                    http.onload = function() {
                                        if (http.status === 200) {
                                            var data = JSON.parse(http.responseText);
                                            data.forEach(function(ticket) {
                                                var container = document.createElement('div');
                                                container.classList.add('container');
                                                var block = document.createElement('div');
                                                block.classList.add('block');
                                                var title = document.createElement('div');
                                                title.classList.add('title');
                                                title.innerHTML = ticket.mail;
                                                var indicator = document.createElement('div');
                                                indicator.classList.add('indicator');
                                                if (ticket.status === "0") {
                                                    indicator.classList.add('red');
                                                } else if (ticket.status === "1") {
                                                    indicator.classList.add('yellow');
                                                } else if (ticket.status === "2") {
                                                    indicator.classList.add('green');
                                                }
                                                block.appendChild(title);
                                                block.appendChild(indicator);
                                                container.appendChild(block);
                                                var description = document.createElement('div');
                                                description.classList.add('description');
                                                description.innerHTML = ticket.body;
                                                container.appendChild(description);
                                                var separator = document.createElement('div');
                                                separator.classList.add('separator');
                                                container.appendChild(separator);
                                                document.querySelector('.mainContainer').appendChild(container);
                                            });
                                        }
                                    };
                                </script>
                                <script>
                                    function setup() {
                                        document.querySelectorAll('.title').forEach(function (titleElement) {
                                            titleElement.addEventListener('click', function () {
                                                var descriptionElement = titleElement.parentNode.parentNode.querySelector('.description');
                                                var separatorElement = titleElement.parentNode.parentNode.querySelector('.separator');
                                                var indicatorElement = titleElement.parentNode.querySelector('.indicator');
                                                var containers = Array.from(document.querySelectorAll('.container'));
                                                var currentIndex = containers.indexOf(titleElement.parentNode.parentNode);


                                                containers.forEach(function (container, index) {
                                                    if (index !== currentIndex) {
                                                        var otherDescriptionElement = container.querySelector('.description');
                                                        var otherSeparatorElement = container.querySelector('.separator');
                                                        var otherIndicatorElement = container.querySelector('.indicator');
                                                        if (otherDescriptionElement.style.display === 'flex') {
                                                            otherDescriptionElement.classList.add('animate-out');
                                                            otherSeparatorElement.classList.add('separator-out');
                                                            if (otherIndicatorElement.classList.contains('inprogress')) {
                                                                otherIndicatorElement.classList.remove('inprogress');
                                                                otherIndicatorElement.classList.add('stopped');
                                                            }
                                                            setTimeout(function () {
                                                                otherDescriptionElement.style.display = 'none';
                                                                otherSeparatorElement.style.display = 'none';
                                                                otherDescriptionElement.classList.remove('animate-out');
                                                                otherDescriptionElement.classList.remove('animate-in');
                                                                otherSeparatorElement.classList.remove('separator-out');
                                                                container.style.marginTop = '';
                                                            }, 1);
                                                        }
                                                    }
                                                });

                                                if (descriptionElement.style.display === "" || descriptionElement.style.display === 'none') {

                                                    descriptionElement.style.display = 'flex';
                                                    var descriptionHeight = descriptionElement.offsetHeight;
                                                    descriptionElement.style.display = '';

                                                    try {
                                                        containers[currentIndex + 1].style.marginTop = descriptionHeight + 100 + 'px';
                                                    } catch (e) {
                                                        console.log('No container below the current one');
                                                    }


                                                    setTimeout(function () {
                                                        for (var i = currentIndex + 1; i < containers.length; i++) {
                                                            containers[i].style.marginTop = '';
                                                        }
                                                    }, 700);


                                                    setTimeout(function () {
                                                        descriptionElement.classList.add('animate-in');
                                                        descriptionElement.style.display = 'flex';
                                                        separatorElement.style.display = 'flex';
                                                        if (!indicatorElement.classList.contains('green')) {
                                                            indicatorElement.classList.remove('stopped')
                                                            indicatorElement.classList.add('inprogress');
                                                        }

                                                    }, 500);
                                                } else {
                                                    descriptionElement.classList.add('animate-out');
                                                    separatorElement.classList.add('separator-out');
                                                    if (indicatorElement.classList.contains('inprogress')) {
                                                        indicatorElement.classList.remove('inprogress');
                                                        indicatorElement.classList.add('stopped');
                                                    }
                                                    setTimeout(function () {
                                                        descriptionElement.style.display = 'none';
                                                        separatorElement.style.display = 'none';
                                                        descriptionElement.classList.remove('animate-out');
                                                        descriptionElement.classList.remove('animate-in');
                                                        separatorElement.classList.remove('separator-out');


                                                        for (var i = currentIndex + 1; i < containers.length; i++) {
                                                            containers[i].style.marginTop = '';
                                                        }
                                                    }, 500);
                                                }
                                            });
                                        });
                                    };
                                    setTimeout(setup, 500);
                                </script>
                            </div>
                        </div>
                    </div>
                </div>

            </div>

        </div>
    </div>
</div>
</body>
<style>
    .separator {
        display: none;
        justify-content: center;
        align-items: center;
        background-color: lightgray;
        height: 3px;
        border-radius: 10px;
        width: 85%;
        margin-left: 7.5%;
        margin-top: 10px;
        margin-bottom: 10px;
    }
    .indicator {
        width: 15px;
        height: 15px;
        border-radius: 15px;
    }
    .time {
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 12.5px;
        line-height: 30px;
        font-family: "GT America";
        width: auto;
    }
    .title {
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 18px;
        font-weight: bold;
        line-height: 30px;
        font-family: "GT America";
        width: 80%;
    }
    .block {
        display: flex;
        flex-direction: row;
        justify-content: center;
        align-items: center;
    }
    .container {
        display: flex;
        flex-direction: column;
    }
    .description {
        display: none;
        justify-content: center;
        align-items: center;
        font-size: 15px;
        font-family: "GT America";
        width: 80%;
        margin: 25px 10% 10px;
    }
    .red {
        background-color: #ed5555;
    }
    .yellow {
        background-color: #ffca4f;
    }
    .green {
        background-color: #37ff77;
    }
    @keyframes slideIn {
        0% {
            transform: translateY(-50%);
            opacity: 0;
        }
        100% {
            transform: translateY(0);
            opacity: 1;
        }
    }
    .animate-in {
        animation: slideIn 0.5s forwards;
        display: flex !important;
    }
    @keyframes slideOut {
        0% {
            transform: translateY(0);
            opacity: 1;
        }
        100% {
            transform: translateY(-50%);
            opacity: 0;
        }
    }
    .animate-out {
        animation: slideOut 0.5s forwards;
        animation-fill-mode: forwards;
    }
    @keyframes separatorAnimation {
        0% {
            width: 0%;
        }
        100% {
            width: 85%;
        }
    }
    .separator {
        animation: separatorAnimation 0.5s forwards;
    }
    @keyframes separatorAnimationOut {
        0% {
            width: 85%;
        }
        100% {
            width: 0%;
        }
    }
    .separator-out {
        animation: separatorAnimationOut 0.5s forwards;
    }
    .container {
        transition: margin-top 0.5s ease;
        margin-top: 40px;
        margin-bottom: 40px;
    }
    @keyframes indicatorAnimation {
        0% {
            background-color: #ed5555;
        }
        100% {
            background-color: #ffca4f;
        }
    }
    .inprogress {
        animation: indicatorAnimation 0.5s forwards;
    }
    @keyframes indicatorStopped {
        0% {
            background-color: #ffca4f;
        }
        100% {
            background-color: #ed5555;;
        }
    }
    .stopped {
        animation: indicatorStopped 0.5s forwards;
    }
</style>
</html>